
@{
ViewData["Title"] = "Subscriptions";
}

<h1>New Subscription</h1>

<form id="subscriptionForm">
    <label for="Name">Name:</label>
    <input type="text" id="Name" name="Name" required />

    <label for="Cost">Cost:</label>
    <input type="number" id="Cost" name="Cost" step="0.01" required />

    <label for="StartDate">Start Date:</label>
    <input type="date" id="StartDate" name="StartDate" required />

    <label for="Cycle">Billing Cycle:</label>
    <select id="Cycle" name="Cycle">
        <option value="Weekly">Weekly</option>
        <option value="BiWeekly">BiWeekly</option>
        <option value="Monthly">Monthly</option>
        <option value="Yearly">Yearly</option>
    </select>

    <button type="submit">Add Subscription</button>
</form>

<div id="result"></div>

<script>
document.getElementById('subscriptionForm').addEventListener('submit', async function(e) {
    e.preventDefault();

    const subscription = {
        Name: document.getElementById('Name').value,
        Cost: parseFloat(document.getElementById('Cost').value),
        StartDate: document.getElementById('StartDate').value,
        Cycle: document.getElementById('Cycle').value
    };

    const response = await fetch('/api/Subscriptions/add', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(subscription)
    });

    const data = await response.json();

    document.getElementById('result').innerText = JSON.stringify(data, null, 2);
});

</script>
<!-- FullCalendar Styles + Scripts -->
<link href='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.css' rel='stylesheet' />
<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/main.min.js'></script>

<div id='calendar'></div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    var calendarEl = document.getElementById('calendar');

    var calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth',
      events: '/api/subscriptions/calendar' // ‚Üê uses your controller/endpoint
    });

    calendar.render();
  });
</script>

<style>
  #calendar {
    max-width: 900px;
    margin: 40px auto;
  }
</style>



   

